#!/usr/bin/ruby

require 'mail'

automated_config = "~/.automated_gmail"


load(File.expand_path(automated_config))

options = { :address              => "smtp.gmail.com",
            :port                 => 587,
            :domain               => 'gmail.com',
            :user_name            => $address,
            :password             => $pass,
            :authentication       => 'plain',
            :enable_starttls_auto => true  }

ARGV.each { |file|
  print "Sending '%s'\n" % file
  Mail.deliver do
    delivery_method :smtp, options
    from     "Book Elf <%s>" % $address
    to       "forwidur7@free.kindle.com"
    subject  'Book'
    body     ''
    add_file file
  end

  print "'%s' sent!\n" % file
}

